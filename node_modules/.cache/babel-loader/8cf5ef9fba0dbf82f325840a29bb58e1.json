{"ast":null,"code":"import { push } from \"connected-react-router\";\nimport { signInAction } from \"./actions\";\nimport { auth, db, FirebaseTimestamp } from \"../../firebase/index\";\nexport const signIn = () => {\n  return async (dispatch, getState) => {\n    const state = getState();\n    const isSignedIn = state.users.isSignedIn;\n\n    if (!isSignedIn) {\n      const username = \"Choushi Daiki\";\n      const uid = \"71480293\";\n      dispatch(signInAction({\n        isSignedIn: true,\n        uid: uid,\n        username: username\n      }));\n      dispatch(push('/'));\n    }\n  };\n};\nexport const signUp = (username, email, password, confirmPassword) => {\n  return async dispatch => {\n    if (!isValidRequiredInput(email, password, confirmPassword)) {\n      alert('必須項目が未入力です。');\n      return false;\n    }\n\n    if (!isValidEmailFormat(email)) {\n      alert('メールアドレスの形式が不正です。もう1度お試しください。');\n      return false;\n    }\n\n    if (password !== confirmPassword) {\n      alert('パスワードが一致しません。もう1度お試しください。');\n      return false;\n    }\n\n    if (password.length < 6) {\n      alert('パスワードは6文字以上で入力してください。');\n      return false;\n    }\n\n    return auth.createUserWithEmailAndPassword(email, password).then(result => {\n      const user = result.user;\n\n      if (user) {\n        const uid = user.uid;\n        const timestamp = FirebaseTimestamp.now();\n        const userInitialData = {\n          created_at: timestamp,\n          email: email,\n          role: \"customer\",\n          uid: uid,\n          update_at: timestamp,\n          username: username\n        };\n        db.collection('users').doc(uid), set(userInitialData).then(() => {\n          dispatch(push('/'));\n        });\n      }\n    });\n  };\n};","map":{"version":3,"sources":["C:/Users/c.daiki/Desktop/react/redux/redux-app/src/reducks/users/operations.js"],"names":["push","signInAction","auth","db","FirebaseTimestamp","signIn","dispatch","getState","state","isSignedIn","users","username","uid","signUp","email","password","confirmPassword","isValidRequiredInput","alert","isValidEmailFormat","length","createUserWithEmailAndPassword","then","result","user","timestamp","now","userInitialData","created_at","role","update_at","collection","doc","set"],"mappings":"AAAA,SAASA,IAAT,QAAqB,wBAArB;AACA,SAASC,YAAT,QAA6B,WAA7B;AACA,SAASC,IAAT,EAAeC,EAAf,EAAmBC,iBAAnB,QAA4C,sBAA5C;AAEA,OAAO,MAAMC,MAAM,GAAG,MAAM;AAC1B,SAAO,OAAMC,QAAN,EAAgBC,QAAhB,KAA6B;AAClC,UAAMC,KAAK,GAAGD,QAAQ,EAAtB;AACA,UAAME,UAAU,GAAGD,KAAK,CAACE,KAAN,CAAYD,UAA/B;;AAEA,QAAG,CAACA,UAAJ,EAAgB;AACd,YAAME,QAAQ,GAAG,eAAjB;AACA,YAAMC,GAAG,GAAG,UAAZ;AAEAN,MAAAA,QAAQ,CAACL,YAAY,CAAC;AACpBQ,QAAAA,UAAU,EAAE,IADQ;AAEpBG,QAAAA,GAAG,EAAEA,GAFe;AAGpBD,QAAAA,QAAQ,EAAEA;AAHU,OAAD,CAAb,CAAR;AAKAL,MAAAA,QAAQ,CAACN,IAAI,CAAC,GAAD,CAAL,CAAR;AACD;AACF,GAfD;AAgBD,CAjBM;AAmBP,OAAO,MAAMa,MAAM,GAAG,CAACF,QAAD,EAAWG,KAAX,EAAkBC,QAAlB,EAA4BC,eAA5B,KAAgD;AACpE,SAAO,MAAMV,QAAN,IAAmB;AAExB,QAAG,CAACW,oBAAoB,CAACH,KAAD,EAAQC,QAAR,EAAkBC,eAAlB,CAAxB,EAA4D;AAC1DE,MAAAA,KAAK,CAAC,aAAD,CAAL;AACA,aAAO,KAAP;AACD;;AACD,QAAG,CAACC,kBAAkB,CAACL,KAAD,CAAtB,EAA+B;AAC7BI,MAAAA,KAAK,CAAC,8BAAD,CAAL;AACA,aAAO,KAAP;AACD;;AACD,QAAIH,QAAQ,KAAKC,eAAjB,EAAkC;AAChCE,MAAAA,KAAK,CAAC,2BAAD,CAAL;AACA,aAAO,KAAP;AACD;;AACD,QAAIH,QAAQ,CAACK,MAAT,GAAkB,CAAtB,EAAyB;AACvBF,MAAAA,KAAK,CAAC,uBAAD,CAAL;AACA,aAAO,KAAP;AACD;;AAED,WAAOhB,IAAI,CAACmB,8BAAL,CAAoCP,KAApC,EAA2CC,QAA3C,EACJO,IADI,CACCC,MAAM,IAAI;AACd,YAAMC,IAAI,GAAGD,MAAM,CAACC,IAApB;;AAEA,UAAGA,IAAH,EAAS;AACP,cAAMZ,GAAG,GAAGY,IAAI,CAACZ,GAAjB;AACA,cAAMa,SAAS,GAAGrB,iBAAiB,CAACsB,GAAlB,EAAlB;AAEA,cAAMC,eAAe,GAAG;AACtBC,UAAAA,UAAU,EAAEH,SADU;AAEtBX,UAAAA,KAAK,EAAEA,KAFe;AAGtBe,UAAAA,IAAI,EAAE,UAHgB;AAItBjB,UAAAA,GAAG,EAAEA,GAJiB;AAKtBkB,UAAAA,SAAS,EAAEL,SALW;AAMtBd,UAAAA,QAAQ,EAAEA;AANY,SAAxB;AASAR,QAAAA,EAAE,CAAC4B,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BpB,GAA3B,GAAgCqB,GAAG,CAACN,eAAD,CAAH,CAC7BL,IAD6B,CACxB,MAAM;AACVhB,UAAAA,QAAQ,CAACN,IAAI,CAAC,GAAD,CAAL,CAAR;AACD,SAH6B,CAAhC;AAID;AACF,KAtBI,CAAP;AAuBD,GA1CD;AA2CD,CA5CM","sourcesContent":["import { push } from \"connected-react-router\";\r\nimport { signInAction } from \"./actions\";\r\nimport { auth, db, FirebaseTimestamp } from \"../../firebase/index\"\r\n\r\nexport const signIn = () => {\r\n  return async(dispatch, getState) => {\r\n    const state = getState()\r\n    const isSignedIn = state.users.isSignedIn\r\n\r\n    if(!isSignedIn) {\r\n      const username = \"Choushi Daiki\"\r\n      const uid = \"71480293\"\r\n\r\n      dispatch(signInAction({\r\n        isSignedIn: true,\r\n        uid: uid,\r\n        username: username\r\n      }))\r\n      dispatch(push('/'))\r\n    }\r\n  }\r\n}\r\n\r\nexport const signUp = (username, email, password, confirmPassword) => {\r\n  return async(dispatch) => {\r\n\r\n    if(!isValidRequiredInput(email, password, confirmPassword)) {\r\n      alert('必須項目が未入力です。');\r\n      return false\r\n    }\r\n    if(!isValidEmailFormat(email)) {\r\n      alert('メールアドレスの形式が不正です。もう1度お試しください。')\r\n      return false\r\n    }\r\n    if (password !== confirmPassword) {\r\n      alert('パスワードが一致しません。もう1度お試しください。')\r\n      return false\r\n    }\r\n    if (password.length < 6) {\r\n      alert('パスワードは6文字以上で入力してください。')\r\n      return false\r\n    }\r\n\r\n    return auth.createUserWithEmailAndPassword(email, password)\r\n      .then(result => {\r\n        const user = result.user\r\n\r\n        if(user) {\r\n          const uid = user.uid\r\n          const timestamp = FirebaseTimestamp.now()\r\n\r\n          const userInitialData = {\r\n            created_at: timestamp,\r\n            email: email,\r\n            role: \"customer\",\r\n            uid: uid,\r\n            update_at: timestamp,\r\n            username: username\r\n          }\r\n\r\n          db.collection('users').doc(uid),set(userInitialData)\r\n            .then(() => {\r\n              dispatch(push('/'))\r\n            })\r\n        }\r\n      })\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}